# 怪物设计思路

公元2520年，清华建成世一大五百周年，内卷严重，卷怪肆虐，原本的美好生活都因为卷怪的侵蚀成为了各种各样的怪物，导鼠、寒鼠、特征枝...你能否拿起手中的武器，消灭卷怪，恢复清华园原本的样子，重现当初美丽的清华园

## 关卡设置

关卡设置结合清华课程和清华特点，可参考如下

- 课程方面：微积分，线性代数，软件工程，大学物理，量子力学，数据结构，编译原理...

- 体育方面：三千米，引体向上，阿甘...

- 生活方面：失恋...

- 活动方面：社工，特奖，挑战杯...

不同关卡对应不同怪物，根据关卡难度随机生成怪物（种类以及数量在一定范围内随机）（比如微积分关卡的怪物可以有导鼠，鸡分等等）

关卡具体实现：

- 微积坟
    - 小怪
        - 导鼠：近战
        - 极鼠：近战
        - 鸡分：远程会飞，无视地形？，发射羽毛
        - 曲面：手很长的很卷的面条？
    - 精英怪：
        - 寒鼠：近战，缓速效果
        - 多元鸡分：会分裂的鸡分，分裂之后血量降低，攻击降低，但移速加快
    - boss
        - 拉格朗日（一个大太阳）：指定方向扫过激光（太阳射线）；全屏伤害（阳光普照）；召唤陨石一定延迟后砸向大地
        

- 线性代树
    - 小怪：
        - 行列狮：近战，冲刺
        - 特征枝：远程，扔树枝
        - 象两：近战，高血高防，经常成对出现（逃
    - 精英怪
        - 特征象两：房间内的象两收到鼓舞，攻速移速加快，高血高防，近战
        - 对角矩阵：生活在房间的对角，可以释放有一定延迟的矩阵困住角色无法移动
    - 内卷空间
        - 在一波又一波的怪物中生存指定时间直到空间被解开

- 大学悟狸
    - 小怪
        - 冻魉：近战
        - 叫冻魉：音波攻击，远程
        - 透精：积蓄能量后向指定方向发射光束攻击，高伤，远程
        - 猪伯：召唤小猪
    - 精英怪
        - 电场怪：闪电攻击，高伤，场上不存在磁场怪时10s后召唤磁场怪，远程
        - 磁场怪：磁力，吸引角色朝自身运动，场上不存在电场怪时10s后召唤电场怪
    
    - 薛定谔的猫
        - 随机出现在地图中任意位置

- 软件攻城
    攻城模式，玩家需在指定时间内攻破城池
    - 小怪
        - 虚球：虚幻的球状物体，攻击后一段时间显形，远程
        - 蜂险：吐出毒针，远程，中毒
        - 伊伊：可爱的小怪，近战
        - 代马：头生尖角，近战
    - 精英怪
        - 勇虎：血量越低，攻击越高，追击式攻击，近战
        - 项目：大眼睛，发射激光，破甲，远程
        - 维护狮：高血，可缓慢修复城池
    - 城
        - 四角有箭塔，远程
        - 四角被击破后方可攻打主城
        - 源源不断的产生怪物
        - 血量低于40%狂暴，加快箭塔攻速以及怪物生成速度

## 怪物类型

大体分为三类，所有攻击均考虑攻击速度以及技能顺序：

- 小怪：近战以及远程攻击

- 精英怪：有某种特殊效果或属性提升的小怪，比如冰冻小怪：击中的目标会被冰冻一段时间

- boss：**一般**来讲血量高，攻击高，行动缓慢，拥有固定的技能顺序，

## 怪物属性

- 名称 name

- 贴图 portrait

- 血量 health

- 抗性 defense

    分为物抗以及法抗

- 韧性 tenacity

    影响受到控制的时间，如冰冻、石化或减少控制影响，如减速效果（**受伤也会产生硬直效果？**）

- 攻击方式 attack_method

    主要分为近程以及远程

- 攻击速度 attack_speed

    两次攻击的间隔时间

- 移动速度 move_speed

    受加速/减速效果影响

- 技能以及技能顺序 skill/skill_sequence

    有的怪物/boss有小技能，这些小技能和普攻按一定顺序释放，如技能1-技能2-普攻-普攻-技能2-普攻-普攻-技能1-普攻-普攻...

- 赏金 reward

    掉落金币的多少

- 状态标识 state

    标志怪物当前状态，如中毒、减速、冰冻等

- 强化方面

    - 强化条件：如boss生命值过低
    - 强化效果：属性值（如攻击，攻速）提升

- 标签 tag

    标志怪物当前的属性加强，如冰冻标签可以使受攻击角色冰冻一段时间

- 难度 difficulty

    每个类型的怪物对应某个难度数值，用于关卡随机生成怪物

## 寻路算法

- 玩家未进入怪物视野时怪物在出生点附近随机游走

- 玩家进入怪物视野后怪物开始追击玩家，玩家进入怪物的攻击范围后怪物停止追击，远程OB并做小范围随机游走

- 远程怪会始终尽量与玩家保持一定距离，**远程怪攻击过程中始终与玩家尽可能保持一定距离（玩家朝怪物移动时怪物会后退，但显然怪物移动速度可能并没有玩家快所以玩家仍然可以追上怪物）**

- **墙会阻挡怪物视野**
## 美工方面

静态图片，动画（移动、攻击、受伤、技能等）。具体实现母鸡

## ToDoList

- 怪物prefab以及动画
  - 移动、攻击、受伤、死亡
  - 怪物相关属性（名称，攻击力，移速等）的设置在`Assets/monsterInfo.json`
- 每种怪物的特殊技能
  - 重写Skill类，可参考`MeleeAttackSkill`等
  - 具体技能描述见怪物类型
- 怪物寻路算法
  - 现在实现的只是朝玩家移动（有卡墙问题），实现思路见寻路算法
- 远程怪物攻击方式
  - 与人物统一接口
  - 调用`Skills[0].Perfom`进行攻击
- 关于武器
  - 交给人物组同学来做，不过怪物也可以有武器，攻击时调用统一的攻击接口
  - 子弹应该和武器绑定
- **BUG**：一次攻击多个同种怪物时会连续扣血，如一次攻击两个导鼠每个导鼠都会受到两次伤害
- **BUG**：怪物随机游荡会卡墙
- 怪物死亡掉落金币（与道具组同学协商）
  - 金币作为ItemStack存在